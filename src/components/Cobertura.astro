---
import AnimateEntrance from './animations/AnimateEntrance';

const {
  backgroundColor = "",
  buttonColor = "",
  title = "",
  text = "",
  buttonText = "",
  cardColor = "",
  image = "",
  video = "",
  baseurl = "",
  mediaType = "image",
  layout = "text-left", // "text-left" o "text-right"
} = Astro.props;
---

<section class={`relative ${backgroundColor} py-20 lg:py-24`}>
  <div class="max-w-7xl mx-auto px-4 xl:px-0">
    <div class={`relative overflow-hidden rounded-3xl ${cardColor} lg:grid lg:grid-cols-2 lg:min-h-[32rem] ${
      layout === "text-right" ? "lg:direction-rtl" : ""
    }`}>
      
      <!-- Texto -->
      <AnimateEntrance 
        client:load 
        origin={layout === "text-right" ? "Right" : "Left"} 
        useScrollTrigger={true} 
        triggerClass="text-col" 
        stagger={0.2}
      >
        <div class={`flex flex-col justify-center px-8 py-16 lg:px-20 lg:py-20 text-col ${
          layout === "text-right" ? "lg:col-start-2" : ""
        }`}>
          
          <!-- Div del título amarillo -->
          <div class={`${buttonColor} p-3 lg:p-4 rounded-lg shadow-md inline-block max-w-xl mb-4`}>
            <h2 class="cobertura-index">
              {title}
            </h2>
          </div>
          
          <!-- Texto secundario -->
          <div class="mb-6 max-w-2xl">
            <h6 class="cobertura-text-index">
              {text}
            </h6>
          </div>
          
          <!-- Botón rojo -->
          <a
            href={`${baseurl}`}
            class="mt-2 flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all px-6 py-3 rounded-lg shadow-md bg-red-600 text-white hover:bg-red-700 w-fit"
          >
            {buttonText}
            <svg
              class="shrink-0 ml-2 h-4 text-white"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z"
                clip-rule="evenodd"
              />
            </svg>
          </a>
        </div>
      </AnimateEntrance>

      <!-- Media (Imagen o Video) - RESPONSIVE CORREGIDO -->
      <figure class={`flex items-center justify-center p-6 lg:p-8 lg:py-12 ${
        layout === "text-right" ? "lg:col-start-1 lg:row-start-1" : ""
      }`}>
        <AnimateEntrance 
          client:load 
          origin={layout === "text-right" ? "Left" : "Right"} 
          useScrollTrigger={true} 
          triggerClass="media-col" 
          stagger={0.2}
        >
          {mediaType === "video" && video ? (
            <div class="w-full h-full flex items-center justify-center">
              <video
                class="w-full aspect-video max-w-3xl sm:max-w-4xl md:max-w-5xl lg:max-w-6xl xl:max-w-7xl object-cover rounded-2xl shadow-2xl media-col"
                autoplay
                muted
                loop
                playsinline
              >
                <source src={video} type="video/mp4" />
                Tu navegador no soporta el elemento video.
              </video>
            </div>
          ) : (
            <img
              class="w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-3xl h-64 sm:h-72 md:h-80 lg:h-96 xl:h-[28rem] object-contain rounded-2xl shadow-2xl media-col"
              src={image}
              alt="Mockup"
            />
          )}
        </AnimateEntrance>
      </figure>
    </div>
  </div>
</section>